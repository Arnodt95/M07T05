{% extends "news_app/base.html" %}
{% block title %}Editor Desk Â· News{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <div>
    <h1 class="h4 m-0">Editor Desk</h1>
    <div class="text-muted small">Review pending submissions and approve for publication.</div>
  </div>
</div>

{% if articles %}
  <div class="card shadow-sm border-0 rounded-4">
    <div class="table-responsive">
      <table class="table align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th>Story</th>
            <th>Author</th>
            <th>Publisher</th>
            <th>Submitted</th>
            <th class="text-end">Actions</th>
          </tr>
        </thead>
        <tbody>
        {% for a in articles %}
          <tr>
            <td>
              <div class="fw-bold">{{ a.title }}</div>
              <div class="text-muted small">{{ a.content|truncatechars:100 }}</div>
            </td>
            <td>{{ a.author.username }}</td>
            <td>{% if a.publisher %}{{ a.publisher.name }}{% else %}Independent{% endif %}</td>
            <td>{{ a.created_at|date:"M d, Y H:i" }}</td>
            <td class="text-end">
              <a class="btn btn-sm btn-outline-secondary" href="{% url 'article_detail' a.id %}">View</a>
              <a class="btn btn-sm btn-primary" href="{% url 'approve_article' a.id %}">Approve</a>
            </td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% else %}
  <div class="alert alert-info">No pending articles.</div>
{% endif %}
{% endblock %}